<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Names App</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
  </head>
  <body>
    <h1>Names App</h1>

    <h2>List of Names</h2>
    <ul id="nameList"></ul>

    <h2>Add a Name</h2>
    <input type="text" id="newNameInput" placeholder="Enter a name" />
    <button onclick="addName()">Add Name</button>

    <h2>Delete a Name</h2>
    <input
      type="text"
      id="deleteNameInput"
      placeholder="Enter a name to delete"
    />
    <button onclick="deleteName()">Delete Name</button>

    <script>
      // Function to fetch and display the list of names
      function getNames() {
        fetch("/names")
          .then((response) => response.json())
          .then((names) => {
            const nameList = document.getElementById("nameList");
            nameList.innerHTML = names
              .map((name) => `<li>${name}</li>`)
              .join("");
          })
          .catch((error) => console.error("Error fetching names:", error));
      }

      // Function to add a name
      function addName() {
        const newNameInput = document.getElementById("newNameInput");
        const newName = newNameInput.value;

        fetch("/names", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ name: newName }),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log("Name added successfully:", data.message);
            getNames(); // Refresh the list of names
          })
          .catch((error) => console.error("Error adding name:", error));

        // Clear the input field
        newNameInput.value = "";
      }

      // Function to delete a name
      function deleteName() {
        const deleteNameInput = document.getElementById("deleteNameInput");
        const nameToDelete = deleteNameInput.value;

        fetch(`/names/${nameToDelete}`, {
          method: "DELETE",
        })
          .then((response) => response.json())
          .then((data) => {
            console.log("Name deleted successfully:", data.message);
            getNames(); // Refresh the list of names
          })
          .catch((error) => console.error("Error deleting name:", error));

        // Clear the input field
        deleteNameInput.value = "";
      }

      // Initial fetch to load names on page load
      getNames();
    </script>
  </body>
</html>
